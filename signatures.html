<html>
    <head></head>
<body>
<script>

 
if(window.steem_keychain){
  // JSONの内容をコピー

steem_keychain.requestBroadcast(
  "usay",
  JSON.parse(tx),
  "active",
  function(res){
    console.log(res);
  }
);

}
</script>
<!---->
<textarea id="myText" rows="5" cols="40" placeholder="複数行テキストを入力してください">
</textarea>
<br>
<button onclick="signatureText()">署名</button>

<script>

async function signatureText() {
  if (!window.steem_keychain) {
    resultEl.textContent = "❌ Steem Keychain がインストールされていません。";
    return;
  }

  message= document.getElementById("myText").value;

  // ② Keychain で署名を作成
  steem_keychain.requestSignBuffer("usay", message, "Active", async (res) => {
    if (!res.success) {
      resultEl.textContent = "署名に失敗しました。";
      return;
    }

    const signature = res.result;
    const publicKey = res.publicKey;

    console.info(res);
    console.info(res.success);
    console.info(signature);
    console.info(publicKey);
  });
}

</script>
<!---->
</body>
</html>