<html>
    <head></head>
<body>
<script>

 
if(window.steem_keychain){
  // JSONの内容をコピー

steem_keychain.requestBroadcast(
  "usay",
  JSON.parse(tx),
  "active",
  function(res){
    console.log(res);
  }
);

}
</script>
<!---->
<textarea id="myText" rows="15" cols="40" placeholder="複数行テキストを入力してください">
</textarea>
<br>
<button onclick="signatureText()">署名</button>
<br>
<textarea id="result" rows="15" cols="40"></textarea>

<script>

async function signatureText() {
  if (!window.steem_keychain) {
    resultEl.textContent = "❌ Steem Keychain がインストールされていません。";
    return;
  }

  message= document.getElementById("myText").value;
  document.getElementById("myText").value = message.replace(/[\r\n]/g, "");;

  // ② Keychain で署名を作成
  steem_keychain.s.requestSignBuffer("usay", message, "active", async (res) => {
    if (!res.success) {
      resultEl.textContent = "署名に失敗しました。";
      return;
    }
    console.info(res);
    console.info(res.success);

    document.getElementById("result").value = res.result;
  });
}

</script>
<!---->
</body>
</html>